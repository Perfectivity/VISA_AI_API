# ğŸ¼ VISA_AI_API (2022å¹´ 11æœˆ 08æ—¥ æ›´æ–° BY.é‡‘æŸ±ç››)

Artificial intelligence API used in VISA wechat mini program recommendation functions.
(äººå·¥æ™ºèƒ½åœ°åŒºæ¨è)

## å‚æ•°
---
|**parameter**|**å¿…å¡«**|**definition**|**example**|
|--|--|--|--|
|tokenâ—ï¸|æ˜¯||tk101_visa_SHA256FlagUnixHash0930#@@endpoint64bit
|openid|æ˜¯|å¾®ä¿¡OpenID|odsabK4hNsnWSSFDV7WTksAleo6c89(Real)
|gender|æ˜¯|ç”·1,å¥³2|1 æˆ– 2
|age|æ˜¯|å¹´é¾„|18 åˆ° 90
|price_range|æ˜¯|å•†å“ä»·æ ¼èŒƒå›´| 1ï¼š0-175å…ƒ ï¼Œ2ï¼š175-290å…ƒ ï¼Œ 3:290-583å…ƒ ï¼Œ4:583-1167å…ƒï¼Œ5:1167å…ƒä»¥ä¸Š
|visit|æ˜¯|è®¿é—®æ¬¡æ•°|
|sensitivityâ—ï¸|å¦|æ¨èæ•æ„Ÿåº¦|low: ä½, medium: é»˜è®¤ high: é«˜
|deep_experienceâ—ï¸|å¦|ç»éªŒå€¼|On:æ´»æ€§ Off: éæ´»æ€§(é»˜è®¤)

---
## è¿”å›çš„ JSON æ•°æ® 
---
|**KEY**|**FEATURES**|**å¤‡æ³¨**|
|--|--|--|
|openID|è¦è¯·çš„OpenID||
|callback|æ—¶é—´|
|token_rc|ç”·1,å¥³2||
|ai_type|JSONæ•°æ®çš„identify||
|restaurant|æ¨è/éæ¨èçš„**é¦–å°”é¤å…**çš„ç¼–å·|æ²¡æœ‰è¿”å›çš„æ•°æ®æ—¶æ˜¾ç¤ºä¸º â€œ â€|
|tour|æ¨è/éæ¨èçš„**é¦–å°”æ™¯ç‚¹**çš„ç¼–å·|æ²¡æœ‰è¿”å›çš„æ•°æ®æ—¶æ˜¾ç¤ºä¸º â€œ â€|
|night|æ¨è/éæ¨èçš„**é¦–å°”å¤œæ™¯**çš„ç¼–å·|æ²¡æœ‰è¿”å›çš„æ•°æ®æ—¶æ˜¾ç¤ºä¸º â€œ â€|
|shopping|æ¨è/éæ¨èçš„**é¦–å°”è´­ç‰©ä¸­å¿ƒ**çš„ç¼–å·|æ²¡æœ‰è¿”å›çš„æ•°æ®æ—¶æ˜¾ç¤ºä¸º â€œ â€|
|food|æ¨è/éæ¨èçš„**åº—é“º**çš„ç¼–å·|æ²¡æœ‰è¿”å›çš„æ•°æ®æ—¶æ˜¾ç¤ºä¸º â€œ â€|
|souvenir|æ¨è/éæ¨èçš„**çºªå¿µå“å•†åº—**çš„ç¼–å·|æ²¡æœ‰è¿”å›çš„æ•°æ®æ—¶æ˜¾ç¤ºä¸º â€œ â€|

â—ï¸ æ¥å£è¿”å›æ•°æ®ä¸æ˜¯äº§å“åç§°ï¼Œè€Œæ˜¯äº§å“çš„ç¼–å·ï¼Œæ‰€ä»¥è¿”å›çš„åœ°åŒºç¼–å·å¿…é¡»ä¸åå°é¡µé¢è¾“å…¥çš„ç›¸åŒåœ°åŒºç¼–å·çš„åœ°åŒºåç§°ç›¸è¿æ¥ã€‚


---
## Category Flag
---
|**åœ°åŒºåˆ†ç±»**|**å‚æ•°**|
|--|--|
|é¦–å°”é¤å…|restraurant
|é¦–å°”æ™¯ç‚¹|tour
|é¦–å°”å¤œæ™¯|night
|é¦–å°”è´­ç‰©ä¸­å¿ƒ|shopping
|åº—é“º|food
|çºªå¿µå“å•†åº—|souvenir

## ai_type
---
|**ai_type**|**å‚æ•°**|
|--|--|
|æ¨èåœ°åŒºï¼ˆæ¥æºäºå¾®ä¿¡å°ç¨‹åºï¼‰|preference
|æ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰|standard
|éæ¨èåœ°åŒºï¼ˆæ¥æºäºå¾®ä¿¡å°ç¨‹åºï¼‰|unlike
|éæ¨èåœ°åŒº (æ­£ç¡®ç­”æ¡ˆï¼‰|unlike_standard

---
# æ¥å£è¯¦æƒ…

##  1. æ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åºï¼‰

ğŸŸ¨ Request URL: https://www.ai-model.kr/ai-deep-mind-visa/predict_proba_visa.ai

ğŸŸ¨ è°ƒç”¨æ•°æ® ï¼š 6ä¸ªæ¨èåœ°åŒº ï¼ˆæ¯ä¸ªåˆ†ç±»ä¸­é€‰1ä¸ªï¼‰

è¿”å›æ•°æ®ä¾‹å­ (**POST**)
```json
{
"openid": "realOpenid", 
"callback": "2022-10-20 13:20:36", 
"token_rcv": "OK",
"ai_type": "preference",
"restaurant": "9351915000116", 
"tour":"9351915000127",
"night": "9351915000135",
"shopping": "9351915000145",
"food": "9351915000154",
"souvenir": "9351915000162"
}
```

##  2. æ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰

ğŸŸ© Request URL: https://www.ai-model.kr/ai-deep-mind-visa/predict_standard_visa.ai

ğŸŸ© è°ƒç”¨æ•°æ® ï¼š 12ä¸ªæ¨èåœ°åŒº ï¼ˆæ¯ä¸ªåˆ†ç±»ä¸­é€‰2ä¸ªï¼‰

è¿”å›æ•°æ®ä¾‹å­ (**POST**)
```json
{"openid": "realOpenid", 
"callback": "2022-10-20 18:56:23", 
"token_rcv": "OK",
"ai_type": "standard",
"restaurant": [ "9351915000116", "9351915000114" ], 
"tour": [ "9351915000127", "9351915000124" ], 
"night": [ "9351915000135" , "9351915000134" ], 
"shopping": [ "9351915000145", "9351915000144" ], 
"food": [ "9351915000154", "9351915000153" ], 
"souvenir": [ "9351915000162", "9351915000161" ]
}
```

**è¯·æ³¨æ„**â€¼ï¸ ï¼š å®¡æŸ¥å§”å‘˜ä¼šé€šè¿‡æ¯”è¾ƒè·Ÿ 1.æ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åºï¼‰ ä¸ 2.æ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰çš„è¿‡ç¨‹ï¼Œè®¡ç®—ä¸¤ä¸ªæ•°æ®çš„ç±»ä¼¼åº¦ã€‚

##  3. éæ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åºï¼‰

ğŸŸ¦ Request URL: https://www.ai-model.kr/ai-deep-mind-visa/predict_proba_unlike_visa.ai

ğŸŸ¦ è°ƒç”¨æ•°æ® ï¼š 4ä¸ªæ¨èåœ°åŒº

è¿”å›æ•°æ®ä¾‹å­ (**POST**)
```json
{ 
"openid": "realOpenid", 
"callback": "2022-10-20 16:23:56", 
"token_rcv": "OK",
"ai_type": "unlike",
"restaurant": "",
"tour":"9351915000131", 
"night": "9351915000142", 
"shopping": "9351915000150", 
"food": "",
"souvenir": "9351915000168" 
}
```


##  4. éæ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰

ğŸŸª Request URL: https://www.ai-model.kr/ai-deep-mind-visa/predict_standard_unlike_visa.ai

ğŸŸª è°ƒç”¨æ•°æ® ï¼š 6ä¸ªæ¨èåœ°åŒº ï¼ˆæ¯ä¸ªåˆ†ç±»ä¸­é€‰1ä¸ªï¼‰

è¿”å›æ•°æ®ä¾‹å­ (**POST**)
```json
{
"openid": "realOpenid", 
"callback": "2022-10-20 17:34:15", 
"token_rcv": "OK",
"ai_type": "unlike_standard", 
"restaurant": "9351915000119", 
"tour":"9351915000131", 
"night": "9351915000142", 
"shopping": "9351915000150", 
"food": "9351915000159", 
"souvenir": "9351915000168"
}
```

---

# ğŸ¼ è®¡ç®—è¯¥æ¥å£çš„æ­£ç¡®åº¦ï¼ˆäººå·¥æ™ºèƒ½æ¨èæ­£ç¡®åº¦ï¼‰
---

### è®¡ç®— **AUC**(æ­£ç¡®åº¦)

AUCçš„ è®¡ç®—æ–¹å¼å¦‚ä¸‹

![image](https://user-images.githubusercontent.com/78646027/135964126-944919f1-25b9-48f7-89db-7575293ad548.png)

 1) TP  è¡¨ç¤ºæ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åºï¼‰å’Œ æ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰ä¸­ç›¸åŒ¹é…çš„åœ°åŒºå·ç çš„ä¸ªæ•°ã€‚
 2) TN è¡¨ç¤ºéæ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åºï¼‰å’Œ éæ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰ä¸­ç›¸åŒ¹é…çš„åœ°åŒºå·ç çš„ä¸ªæ•°ã€‚
 3) FP  è¡¨ç¤ºæ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åºï¼‰å’Œ æ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰ä¸­ç›¸ä¸åŒ¹é…çš„åœ°åŒºå·ç çš„ä¸ªæ•°ã€‚
 4) FN è¡¨ç¤ºéæ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åºï¼‰å’Œ éæ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰ä¸­ç›¸ä¸åŒ¹é…çš„åœ°åŒºå·ç çš„ä¸ªæ•°ã€‚

### ğŸŸ¨ä¾‹å­

## 1) TP ä¸ FP



æ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åº)æ•°æ®
```json
{
"openid": "aawre2456aa434MMsaaaaaa", 
"callback": "2022-11-00 10:58:16", 
"token_rcv": "OK",
"ai_type": "preference",
"restaurant": "9351915000116", 
"tour":"9351915000127",
"night": "9351915000135",
"shopping": "9351915000145",
"food": "9351915000154",
"souvenir": "9351915000162"
}
```
æ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰
```json
{"openid": "aaaaaaaaaaaaaa", 
"callback": "2022-11-00 14:31:26", 
"token_rcv": "OK",
"ai_type": "standard",
"restaurant": [ "9351915000116", "9351915000114" ], 
"tour": [ "9351915000127", "9351915000124" ], 
"night": [ "9351915000135" , "9351915000134" ], 
"shopping": [ "9351915000145", "9351915000144" ], 
"food": [ "9351915000158", "9351915000153" ], 
"souvenir": [ "9351915000160", "9351915000161" ]
}
```

è¿™ä¸¤ä¸ªæ¥å£è°ƒç”¨çš„æ•°æ®ä¸­ï¼Œ
"restaurant": "9351915000116", 
"tour":"9351915000127", 
"night": "9351915000135",
"shopping": "9351915000145" 
è¿™4ä¸ªæ˜¯ä¸€è‡´ï¼ˆä¸¤ä¸ªæ•°æ®ä¸­éƒ½æœ‰ï¼‰ï¼Œ

"food": "9351915000154", 
"souvenir": "9351915000162" 
è¿™2ä¸ªæ˜¯ä¸ä¸€è‡´ï¼ˆåªåœ¨æ¨èäº§å“ï¼ˆæ¥æºäºå°ç¨‹åº)æ•°æ®ä¸­å­˜åœ¨ï¼‰ã€‚


æ‰€ä»¥è¯´ï¼Œ**è¿™æ ·çš„æƒ…å†µä¸‹ï¼ŒTPæ˜¯4ï¼ŒFPæ˜¯2ã€‚**

---

## 2) TN ä¸ FN



éæ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åº)æ•°æ®
```json
{ 
"openid": "aaaaaaaaaaaaaa", 
"callback": "2022-11-00 14:52:20", 
"token_rcv": "OK",
"ai_type": "unlike",
"restaurant": "",
"tour":"9351915000131", 
"night": "9351915000142", 
"shopping": "9351915000150", 
"food": "",
"souvenir": "9351915000168" 
}
```
éæ¨èåœ°åŒºï¼ˆæ­£ç¡®ç­”æ¡ˆï¼‰
```json
{
"openid": "aaaaaaaaaaaaaa", 
"callback": "2022-11-00 14:54:15", 
"token_rcv": "OK",
"ai_type": "unlike_standard", 
"restaurant": "9351915000119", 
"tour":"9351915000131", 
"night": "9351915000142", 
"shopping": "9351915000150", 
"food": "9351915000159", 
"souvenir": "9351915000170"
}
```

è¿™ä¸¤ä¸ªæ¥å£è°ƒç”¨çš„æ•°æ®ä¸­ï¼Œ
"tour":"9351915000131", 
"night": "9351915000142", 
"shopping": "9351915000150",  
è¿™3ä¸ªæ˜¯ä¸€è‡´ï¼ˆä¸¤ä¸ªæ•°æ®ä¸­éƒ½æœ‰ï¼‰ï¼Œ

"souvenir": "9351915000168"
è¿™1ä¸ªæ˜¯ä¸ä¸€è‡´ï¼ˆåªåœ¨éæ¨èåœ°åŒºï¼ˆæ¥æºäºå°ç¨‹åº)æ•°æ®ä¸­å­˜åœ¨ï¼‰ã€‚


æ‰€ä»¥è¯´ï¼Œ**è¿™æ ·çš„æƒ…å†µä¸‹ï¼ŒTNæ˜¯3ï¼ŒFNæ˜¯1ã€‚**

---

## 3) è®¡ç®— AUC

ç»“æœå¦‚ä¸‹ï¼Œ

|**ç‰¹æ€§**|**æ•°é‡**|
|--|--|
TP|4
FP|2
TN|3
FN|1

ç”±äºAUCçš„è®¡ç®—æ–¹æ³•ï¼Œ

AUC= 4 + 3 / 4 + 2 + 3 + 1 = **0.7**


---

### æˆåŠŸåˆ¤æ–­æ ‡å‡†

100äººçš„å¹³å‡AUC0.6ä»¥ä¸Šçš„è¯æ‰ç®—åˆæ ¼ã€‚

![image](https://user-images.githubusercontent.com/78646027/135964173-135f666c-37d6-4ae4-966a-56a88f8f2738.png)



ğŸ”†æ“ä½œä¸­å‘ç”Ÿç–‘é—®æ—¶ï¼Œå¾®ä¿¡ : sjthsy
